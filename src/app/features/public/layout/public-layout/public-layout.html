<header class="header">
  <div class="header__inner">
    <a routerLink="/radio" class="logo">Dubcast</a>
    <app-mini-player class="header__mini-player"></app-mini-player>

    <nav class="nav">
      <div class="live-stats" *ngIf="onlineCount$ | async as count" title="Сейчас онлайн">
        <div class="live-indicator">
          <span class="pulsing-dot"></span>
        </div>
        <i class="pi pi-users"></i>
        <span class="count">{{ count }}</span>
      </div>

      <a
        routerLink="/radio"
        class="nav__link"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        >Radio</a
      >

      <!-- Guest -->
      <ng-container *ngIf="!(isAuth$ | async); else authed">
        <a routerLink="/login" class="nav__link" routerLinkActive="active">Login</a>
        <a routerLink="/register" class="nav__link" routerLinkActive="active">Register</a>
      </ng-container>

      <!-- Authenticated -->
      <ng-template #authed>
        <span class="nav__user" title="Logged in as {{ displayName$ | async }}">
          {{ displayName$ | async }}
          <small
            *ngIf="(isAuth$ | async) && !(hasUsername$ | async)"
            class="no-username"
            title="You don't have a username set. Set it in your Profile."
          >
            (no username)
          </small>
        </span>

        <a routerLink="/profile" class="nav__link" routerLinkActive="active">Profile</a>
        <button type="button" class="nav__link nav__btn" (click)="logout()">Logout</button>
      </ng-template>
    </nav>
  </div>
</header>

<main class="main">
  <router-outlet></router-outlet>
</main>

<footer class="footer">
  <div class="footer__inner">&copy; 2024 Dubcast. All rights reserved.</div>
</footer>
